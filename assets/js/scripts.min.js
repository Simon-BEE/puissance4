for(var numJoueur=1,nbColonnes=5,nbLines=5,jeu=!0,texte="",plateau=[],i=0;i<nbLines;i++)plateau[i]=[];function newGame(){for(var e=0;e<nbLines;e++)for(var n=0;n<nbColonnes;n++)plateau[e][n]=0;afficheTextAnnonce("Le jeu commence ! C'est au tour du joueur "+nomDuJoueur(1)),jeu=!0,creerTableau()}function afficheTextAnnonce(e){document.getElementById("text-annonce").innerHTML=e}function nomDuJoueur(e){return 1==e?"rouge":"bleu"}function creerTableau(){texte="<table>";for(var e=0;e<nbLines;e++){texte+="<tr>";for(var n=0;n<nbColonnes;n++)texte+="<td onclick='detectClic("+n+")' id='"+e+"-"+n+"'>",1==plateau[e][n]?texte+="<div class='joueur1'></div>":2==plateau[e][n]&&(texte+="<div class='joueur2'></div>"),texte+="</td>";texte+="</tr>"}texte+="</table>",document.getElementById("puissance4").innerHTML=texte}function detectClic(e){verifPosition(e)&&jeu&&(puissance4(poseJeton(e),e,0,0)?(jeu=!1,afficheTextAnnonce("Le joueur "+nomDuJoueur(numJoueur)+" a gagnÃ© la partie !")):afficheTextAnnonce("C'est au tour du joueur "+nomDuJoueur(numJoueur=1==numJoueur?2:1)))}function verifPosition(e){return 0==plateau[0][e]}function poseJeton(e){for(var n=nbLines-1;n>=0;n--)if(0==plateau[n][e])return plateau[n][e]=numJoueur,refreshTab(n,e,numJoueur),n}function refreshTab(e,n,u){document.getElementById(e+"-"+n).innerHTML="<div class='joueur"+u+"'></div>"}function puissance4(e,n,u,t){if(console.log("valeur : "+e+" "+n+" / incremente "+u+" "+t),0==t&&0==u){var o=1+puissance4(e,n-1,0,-1)+puissance4(e,n+1,0,1),a=1+puissance4(e-1,n,-1,0)+puissance4(e+1,n,1,0),r=1+puissance4(e-1,n-1,-1,-1)+puissance4(e+1,n+1,1,1),i=1+puissance4(e-1,n+1,-1,1)+puissance4(e+1,n-1,1,-1);return console.log(o,a,r,i),o>=4||a>=4||r>=4||i>=4}return e<nbLines&&e>=0&&n<nbColonnes&&n>=0?(console.log("valeur : "+e+" "+n+" / incremente "+u+" "+t),plateau[e][n]==numJoueur?1+puissance4(e+u,n+t,u,t):0):0}newGame();